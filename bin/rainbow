#!/bin/bash

set -eu

readonly SCRIPT_NAME=$(basename $0)

gradation() {
  local span=$1
  local r1=$2
  local g1=$3
  local b1=$4
  local r2=$5
  local g2=$6
  local b2=$7

  local r_diff=$(( (r2 - r1) / span))
  local g_diff=$(( (g2 - g1) / span))
  local b_diff=$(( (b2 - b1) / span))
  for ((i=0; i<$span; i++)); do
    echo "rgba($((r1 + i * r_diff)), $((g1 + i * g_diff)), $((b1 + i * b_diff)), 0.1)"
  done
}

usage() {
  cat << EOS
$SCRIPT_NAME はRGBAの虹色文字列を生成する。

Description:
  引数により、虹色の次の色まで何分割するかを指定できる。
  たとえば引数に1を指定すると、次の色まで1色しか指定しない。
  よって、色と色の間隔が広い、荒い虹色になる。

  逆に引数に10などを指定すると、次の色までに10色になる。
  よって、色と色の間隔が狭い、滑らかな虹色になる。

Usage:
  $SCRIPT_NAME number
  $SCRIPT_NAME [-h | --help]

Options:
    -h, --help    このヘルプを出力する
EOS
}

span=$1

case $span in
  -h|--help)
    usage
    exit
    ;;
esac

gradation $span 255 0 0 255 69 0
gradation $span 255 69 0 255 255 0
gradation $span 255 255 0 0 128 0
gradation $span 0 128 0 0 0 255
gradation $span 0 0 255 75 0 130
gradation $span 75 0 130 238 130 238
gradation $span 238 130 238 255 0 0
